version: '3.8'

services:
  nextcloud:
    image: nextcloud:latest
    container_name: nextcloud-test
    ports:
      - "8801:80"
    environment:
      - SQLITE_DATABASE=nextcloud
      - NEXTCLOUD_ADMIN_USER=admin
      - NEXTCLOUD_ADMIN_PASSWORD=admin
      - NEXTCLOUD_TRUSTED_DOMAINS=localhost
    tmpfs:
      # Make the container truly ephemeral - data is lost on restart
      - /var/www/html:size=2g,mode=1777
