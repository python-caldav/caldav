services:
  nextcloud:
    image: nextcloud:latest
    container_name: nextcloud-test
    ports:
      - "8801:80"
    environment:
      - SQLITE_DATABASE=nextcloud
      - NEXTCLOUD_ADMIN_USER=admin
      - NEXTCLOUD_ADMIN_PASSWORD=admin
      - NEXTCLOUD_TRUSTED_DOMAINS=localhost
    tmpfs:
      # Make the container truly ephemeral - data is lost on restart
      # uid/gid 33 is www-data in the Nextcloud container
      - /var/www/html:size=2g,uid=33,gid=33
